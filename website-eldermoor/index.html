<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eldermoor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" href="data/images/role/wolf-logo.png">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Creepster&family=Nosifer&family=Cinzel:wght@400;600;700&display=swap');
        * { scrollbar-width: thin; scrollbar-color: #8B0000 #1a1a1a; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1a1a1a; }
        ::-webkit-scrollbar-thumb { background: #8B0000; border-radius: 4px; }

        .font-horror { font-family: 'Nosifer', cursive; }
        .font-creepy { font-family: 'Creepster', cursive; }
        .font-elegant { font-family: 'Cinzel', serif; }

        .bg-gradient-dark { background: linear-gradient(135deg, #0d1117 0%, #1a0000 25%, #000000 50%, #1a0000 75%, #0d1117 100%); }
        .nav-mobile{ display:none; }
        .blood-drip { position: relative; overflow: hidden; }
        .blood-drip::after { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px; background: linear-gradient(90deg, transparent, #8B0000, transparent); animation: bloodFlow 3s ease-in-out infinite; }
        @keyframes bloodFlow { 0%,100%{opacity:0;}50%{opacity:1;} }

        .floating { animation: float 6s ease-in-out infinite; }
        @keyframes float { 0%,100%{transform:translateY(0);}50%{transform:translateY(-20px);} }

        .glow { box-shadow: 0 0 20px rgba(139,0,0,0.8); }
        .text-shadow-red { text-shadow: 2px 2px 8px rgba(139,0,0,0.8); }

        .card-flip{ perspective:1000px; }
        .card-inner{ transition: transform .8s; transform-style:preserve-3d; }
        .card-flip:hover .card-inner{ transform: rotateY(180deg); }

        .modal { display:none; position:fixed; inset:0; z-index:1000; background: rgba(0,0,0,.9); align-items:center; justify-content:center; }
        .modal.show { display:flex; }

        .howl { animation: howl 4s ease-in-out infinite; }
        @keyframes howl { 0%,100%{opacity:.7;transform:scale(1);}50%{opacity:1;transform:scale(1.05);} }

        .team-baik{ border-color:#10B981; }
        .team-jahat{ border-color:#DC2626; }
        .team-netral{ border-color:#F59E0B; }

        .parallax{ background-attachment: fixed; background-position:center; background-repeat:no-repeat; background-size:cover; }

        .fade-in{ animation: fadeIn .9s ease both; }
        @keyframes fadeIn{ from{opacity:0;transform:translateY(18px);} to{opacity:1;transform:translateY(0);} }

        .pulse-red{ animation: pulseRed 2s infinite; }
        @keyframes pulseRed{ 0%{box-shadow:0 0 0 0 rgba(139,0,0,.7);}70%{box-shadow:0 0 0 20px rgba(139,0,0,0);}100%{box-shadow:0 0 0 0 rgba(139,0,0,0);} }

        .filter-btn.active{ background-color:#8B0000 !important; }
        .modal-content{ max-height:90vh; overflow-y:auto; }
        .typing{ animation: typing 2s infinite; }
        @keyframes typing{ 0%,50%,100%{opacity:1;}25%,75%{opacity:.5;} }

        .dark-forest{ background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,.9) 100%), url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 800"><polygon points="0,800 200,600 400,650 600,550 800,600 1000,500 1200,550 1200,800" fill="%23111"/><polygon points="0,800 150,650 350,700 550,600 750,650 950,550 1200,600 1200,800" fill="%23222" opacity="0.7"/></svg>'); }

        .blood-text{ background:linear-gradient(45deg,#8B0000,#FF4444,#8B0000); -webkit-background-clip:text; background-clip:text; -webkit-text-fill-color:transparent; }

        /* role card */
        .role-card{ position:relative; overflow:hidden; border-radius:12px; border:2px solid #8B0000; cursor:pointer; transition: transform .28s ease, box-shadow .28s ease; height:360px; display:flex; align-items:flex-end; }
        .role-card img{ width:100%; height:100%; object-fit:cover; border-radius:10px; transition: transform .28s ease, filter .28s ease; }
        .role-card::after{ content: attr(data-emote); font-family: "Font Awesome 6 Free"; font-weight:900; font-size:2.8rem; color:#fff; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%) scale(.85); opacity:0; transition:opacity .22s ease, transform .22s ease; pointer-events:none; }
        .role-card:hover::after{ opacity:1; transform:translate(-50%,-50%) scale(1); }
        .role-card:hover img{ filter:brightness(.65); transform:scale(1.02); }
        .role-card .card-bottom{ position:absolute; bottom:0; left:0; right:0; background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.75) 70%); padding:12px; text-align:center; }

        /* image modal */
        #imageModal { display:none; position:fixed; inset:0; z-index:2000; background:rgba(0,0,0,.96); align-items:center; justify-content:center; }
        #imageModal.show { display:flex; }
        #imageModal img { max-width:92%; max-height:92%; object-fit:contain; transition:transform .28s ease; cursor:zoom-in; }

        /* scroll animations helpers */
        .scroll-animate { opacity:0; transform:translateY(30px); transition: all .8s cubic-bezier(.25,.46,.45,.94); }
        .scroll-animate.visible { opacity:1; transform:translateY(0); }
        .slide-left { transform:translateX(-40px); }
        .slide-right { transform:translateX(40px); }

        /* rules and timeline improvements */
        .rule-card{ background:linear-gradient(145deg, rgba(17,17,17,.9), rgba(26,26,26,.9)); border-radius:12px; padding:1.5rem; border:1px solid rgba(139,0,0,.18); backdrop-filter: blur(8px); transition:all .28s ease; }
        .rule-card:hover{ transform:translateY(-6px); box-shadow:0 18px 40px rgba(139,0,0,.12); }
        .rule-card::before{ content:''; position:absolute; left:0; right:0; top:0; height:2px; background:linear-gradient(90deg,transparent,#8B0000,transparent); opacity:0; transition:opacity .28s ease; }
        .rule-card:hover::before{ opacity:1; }

        .timeline{ position:relative; padding:2rem 0; }
        .timeline::before{ content:''; position:absolute; left:50%; top:0; bottom:0; width:2px; background:linear-gradient(to bottom,#8B0000,#FF4444,#8B0000); transform:translateX(-50%); }
        .timeline-item{ position:relative; margin:2rem 0; padding:0 2rem; }
        .timeline-item:nth-child(odd){ text-align:right; padding-right:calc(50% + 2rem); }
        .timeline-item:nth-child(even){ text-align:left; padding-left:calc(50% + 2rem); }
        .timeline-dot{ position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:18px; height:18px; background:#8B0000; border:4px solid #000; border-radius:50%; z-index:10; animation:pulse 2s infinite; }
        @keyframes pulse{ 0%{box-shadow:0 0 0 0 rgba(139,0,0,.7);}70%{box-shadow:0 0 0 12px rgba(139,0,0,0);}100%{box-shadow:0 0 0 0 rgba(139,0,0,0);} }
        .timeline-content{ display:inline-block; max-width:42ch; background:linear-gradient(145deg, rgba(17,17,17,.9), rgba(26,26,26,.9)); padding:1rem; border-radius:10px; border:1px solid rgba(139,0,0,.12); transition:transform .2s; }
        .timeline-content:hover{ transform:scale(1.02); }

        /* command dropdown */
        .command-dropdown{ max-height:0; overflow:hidden; transition:max-height .42s cubic-bezier(.25,.46,.45,.94), opacity .28s ease; opacity:0; }
        .command-dropdown.show{ max-height:1200px; opacity:1; }
        .command-item{ padding:.65rem 1rem; border-bottom:1px solid rgba(139,0,0,.08); cursor:pointer; transition:all .18s ease; }
        .command-item:hover{ background: rgba(139,0,0,0.06); border-left:3px solid #8B0000; }

        /* responsive tweaks */
        @media (max-width:1024px){ .role-card{ height:320px; } }
        @media (max-width:768px){
            .timeline::before{ left:20px; }
            .timeline-item{ padding-left:3rem; padding-right:1rem; text-align:left; }
            .timeline-item:nth-child(odd){ padding-right:1rem; text-align:left; }
            .timeline-item:nth-child(even){ padding-left:3rem; }
            .timeline-dot{ left:20px; }
            .role-card{ height:260px; }
            .font-horror{ font-size:2.8rem; }
            .nav-mobile{ display:none; }
            .nav-mobile.show{ display:flex; flex-direction:column; position:absolute; top:100%; left:0; right:0; background:rgba(0,0,0,.95); padding:1rem; border-top:1px solid #8B0000; }
        }

        /* dev notice */
        .dev-notice{ position:fixed; inset:0; background:rgba(0,0,0,.95); display:flex; align-items:center; justify-content:center; z-index:9999; padding:1rem; }
        .dev-notice-content{ background:linear-gradient(145deg,#1a1a1a,#0d1117); border:2px solid #8B0000; border-radius:12px; padding:1.5rem; max-width:520px; text-align:center; animation:slideIn .48s ease; }
        @keyframes slideIn{ from{opacity:0;transform:scale(.92);} to{opacity:1;transform:scale(1);} }

    </style>
</head>
<body class="bg-gradient-dark text-white overflow-x-hidden">

    <!-- Development Notice Modal -->
    <div id="devNotice" class="dev-notice" role="dialog" aria-modal="true">
        <div class="dev-notice-content">
            <i class="fas fa-exclamation-triangle text-yellow-400 text-4xl mb-4"></i>
            <h3 class="font-elegant text-2xl text-red-400 mb-4">Pemberitahuan Pengembangan</h3>
            <p class="font-elegant text-gray-300 mb-6 leading-relaxed">Permainan ini masih dalam tahap pengembangan. Jika terjadi bug atau error, mohon dimaklumi dan laporkan kepada tim pengembang.</p>
            <button id="devNoticeOk" class="bg-red-800 hover:bg-red-700 text-white font-elegant px-6 py-2 rounded-lg transition-all">Saya Mengerti</button>
        </div>
    </div>

    <audio id="howlAudio" preload="auto"><source src="../../data/music/wolf-howl.mp3" type="audio/mpeg"></audio>
    <audio id="bgAudio" loop preload="auto"><source src="../../data/music/background-music.mp3" type="audio/wav"></audio>

    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-black/80 backdrop-blur-sm border-b border-red-900/50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <h1 class="font-horror text-xl md:text-2xl text-red-500 text-shadow-red">ELDERMOOR</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="#home" class="text-white hover:text-red-400 transition-colors font-elegant">Home</a>
                        <a href="#rules" class="text-white hover:text-red-400 transition-colors font-elegant">Aturan</a>
                        <a href="#roles" class="text-white hover:text-red-400 transition-colors font-elegant">Roles</a>
                        <a href="#join" class="text-white hover:text-red-400 transition-colors font-elegant">Join Game</a>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <button id="audioToggle" class="text-white hover:text-red-400 transition-colors"><i class="fas fa-volume-mute text-xl"></i></button>
                    <button onclick="toggleMobileNav()" class="md:hidden text-white hover:text-red-400"><i class="fas fa-bars text-xl"></i></button>
                </div>
            </div>
            <div id="mobileNav" class="nav-mobile">
                <a href="#home" class="text-white hover:text-red-400 transition-colors font-elegant py-2">Home</a>
                <a href="#rules" class="text-white hover:text-red-400 transition-colors font-elegant py-2">Aturan</a>
                <a href="#roles" class="text-white hover:text-red-400 transition-colors font-elegant py-2">Roles</a>
                <a href="#join" class="text-white hover:text-red-400 transition-colors font-elegant py-2">Join Game</a>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <section id="home" class="relative min-h-screen flex items-center justify-center dark-forest">
        <div class="text-center z-10 px-4">
            <div class="floating scroll-animate">
                <h1 class="font-horror text-4xl md:text-6xl lg:text-8xl blood-text mb-8 text-shadow-red howl">ELDERMOOR</h1>
                <p class="font-elegant text-lg md:text-xl lg:text-2xl text-gray-300 mb-8 max-w-2xl mx-auto leading-relaxed">Selamat datang di desa terkutuk yang diselimuti bayang-bayang kegelapan abadi. Di sini, kepercayaan adalah kemewahan dan kecurigaan adalah kunci bertahan hidup.</p>
                <div class="space-y-4">
                    <button onclick="scrollToSection('rules')" class="bg-red-800 hover:bg-red-700 text-white font-elegant px-6 md:px-8 py-3 md:py-4 rounded-lg transition-all transform hover:scale-105 glow mr-4">Mulai Petualangan</button>
                    <button onclick="playHowl()" class="border-2 border-red-500 text-red-500 hover:bg-red-500 hover:text-white font-elegant px-6 md:px-8 py-3 md:py-4 rounded-lg transition-all transform hover:scale-105"><i class="fas fa-volume-up mr-2"></i>Dengar Lolongan</button>
                </div>
            </div>
        </div>
        <div class="absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce"><i class="fas fa-chevron-down text-red-500 text-2xl"></i></div>
    </section>

    <!-- Rules -->
    <section id="rules" class="py-20 bg-black/50 blood-drip">
        <div class="max-w-6xl mx-auto px-4">
            <h2 class="font-horror text-3xl md:text-5xl text-red-500 text-center mb-16 text-shadow-red scroll-animate">ATURAN PERMAINAN</h2>

            <!-- reorganized rules: left column info, right column cards -->
            <div class="grid md:grid-cols-2 gap-10">
                <div class="space-y-6 scroll-animate">
                    <div class="rule-card">
                        <div class="flex items-center mb-4"><div class="bg-red-800 rounded-full p-3 mr-4"><i class="fas fa-moon text-white text-xl"></i></div><h3 class="font-elegant text-2xl text-red-400">Siklus Permainan</h3></div>
                        <div class="grid sm:grid-cols-2 gap-4">
                            <div>
                                <div class="flex items-center"><div class="w-2 h-2 bg-red-400 rounded-full mr-3"></div><strong class="text-red-400">Malam:</strong></div>
                                <p class="text-gray-300 font-elegant ml-5">Serigala berburu, role khusus beraksi (default 90 detik)</p>
                            </div>
                            <div>
                                <div class="flex items-center"><div class="w-2 h-2 bg-yellow-400 rounded-full mr-3"></div><strong class="text-yellow-400">Siang:</strong></div>
                                <p class="text-gray-300 font-elegant ml-5">Diskusi dan voting untuk menggantung tersangka (default 120 detik)</p>
                            </div>
                        </div>
                    </div>

                    <div class="rule-card slide-left">
                        <div class="flex items-center mb-4"><div class="bg-purple-800 rounded-full p-3 mr-4"><i class="fas fa-eye text-white text-xl"></i></div><h3 class="font-elegant text-2xl text-purple-400">Mode Revelation</h3></div>
                        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-3">
                            <div class="text-center p-3 rounded-lg border border-yellow-500/20"><strong class="text-yellow-400">FULL</strong><p class="text-gray-300 text-sm mt-2">Role lengkap terungkap saat mati</p></div>
                            <div class="text-center p-3 rounded-lg border border-blue-500/20"><strong class="text-blue-400">AURA_ONLY</strong><p class="text-gray-300 text-sm mt-2">Hanya aura (Good/Evil/Unknown)</p></div>
                            <div class="text-center p-3 rounded-lg border border-purple-500/20"><strong class="text-purple-400">PROGRESSIVE</strong><p class="text-gray-300 text-sm mt-2">Informasi bertambah per hari</p></div>
                            <div class="text-center p-3 rounded-lg border border-gray-500/20"><strong class="text-gray-400">HIDDEN</strong><p class="text-gray-300 text-sm mt-2">Tidak ada informasi</p></div>
                        </div>
                    </div>

                    <div class="rule-card slide-right">
                        <div class="flex items-center mb-4"><div class="bg-blue-800 rounded-full p-3 mr-4"><i class="fas fa-magic text-white text-xl"></i></div><h3 class="font-elegant text-2xl text-blue-400">Fitur & Mekanisme Khusus</h3></div>
                        <div class="grid md:grid-cols-2 gap-4 text-gray-300 font-elegant text-sm">
                            <div>
                                <h4 class="text-red-400 mb-2">Mekanisme Dasar</h4>
                                <ul class="space-y-2">
                                    <li>• Minimum 5 pemain untuk mulai permainan</li>
                                    <li>• Whisper system untuk komunikasi rahasia</li>
                                    <li>• Hunter revenge - balas dendam saat mati</li>
                                    <li>• Lover chain death - mati bersama kekasih</li>
                                    <li>• Role transformation abilities</li>
                                    <li>• Guardian protection mechanics</li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="text-purple-400 mb-2">Fitur Unik</h4>
                                <ul class="space-y-2">
                                    <li>• <strong>Peaceful Night:</strong> Blacksmith ciptakan malam tanpa pembunuhan</li>
                                    <li>• <strong>Role Stealing:</strong> Wolf Trickster curi identitas</li>
                                    <li>• <strong>Transformation:</strong> Wild Child, Cursed, Traitor berubah role</li>
                                    <li>• <strong>Multiple Kills:</strong> Cannibal makan banyak korban sekaligus</li>
                                    <li>• <strong>Team Dynamics:</strong> Mason, Bandit-Accomplice, Wolf Pack</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="space-y-6 scroll-animate">
                    <div class="rule-card">
                        <div class="flex items-center mb-4"><div class="bg-yellow-800 rounded-full p-3 mr-4"><i class="fas fa-crown text-white text-xl"></i></div><h3 class="font-elegant text-2xl text-yellow-400">Kondisi Menang</h3></div>
                        <div class="space-y-2 text-gray-300 font-elegant">
                            <p><span class="text-green-400">🏘️ Desa:</span> Basmi semua serigala</p>
                            <p><span class="text-red-400">🐺 Serigala:</span> Kuasai atau samakan jumlah dengan warga</p>
                            <p><span class="text-yellow-400">💀 Netral:</span> Kondisi khusus per role</p>
                            <p><span class="text-pink-400">💕 Lovers:</span> Bertahan berdua sampai akhir</p>
                            <p><span class="text-purple-400">🤡 Tanner:</span> Berhasil digantung warga</p>
                        </div>
                    </div>

                    <div class="rule-card">
                        <div class="flex items-center mb-4"><div class="bg-green-800 rounded-full p-3 mr-4"><i class="fas fa-users text-white text-xl"></i></div><h3 class="font-elegant text-2xl text-green-400">Tim & Aura</h3></div>
                        <div class="space-y-3">
                            <div class="flex items-center space-x-3 p-3 bg-green-900/20 rounded-lg"><i class="fas fa-shield text-green-400"></i><div><strong class="text-green-400">Tim Baik</strong><p class="text-gray-300 text-sm">Warga desa yang ingin menyelamatkan kampung</p></div></div>
                            <div class="flex items-center space-x-3 p-3 bg-red-900/20 rounded-lg"><i class="fas fa-skull text-red-400"></i><div><strong class="text-red-400">Tim Jahat</strong><p class="text-gray-300 text-sm">Serigala dan sekutunya yang ingin menguasai</p></div></div>
                            <div class="flex items-center space-x-3 p-3 bg-yellow-900/20 rounded-lg"><i class="fas fa-balance-scale text-yellow-400"></i><div><strong class="text-yellow-400">Tim Netral</strong><p class="text-gray-300 text-sm">Role dengan tujuan khusus sendiri</p></div></div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </section>

    <!-- Roles -->
    <section id="roles" class="py-20 bg-gradient-to-b from-black to-red-900/20">
        <div class="max-w-7xl mx-auto px-4">
            <h2 class="font-horror text-3xl md:text-5xl text-red-500 text-center mb-16 text-shadow-red scroll-animate">ROLES & KARAKTER</h2>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-12 max-w-4xl mx-auto scroll-animate">
                <div class="bg-gray-900/80 p-4 rounded-lg border border-green-500/50 text-center">
                    <div class="text-2xl text-green-400 font-bold" id="goodCount">0</div>
                    <div class="font-elegant text-green-300">Tim Baik</div>
                </div>
                <div class="bg-gray-900/80 p-4 rounded-lg border border-red-500/50 text-center">
                    <div class="text-2xl text-red-400 font-bold" id="evilCount">0</div>
                    <div class="font-elegant text-red-300">Tim Jahat</div>
                </div>
                <div class="bg-gray-900/80 p-4 rounded-lg border border-yellow-500/50 text-center">
                    <div class="text-2xl text-yellow-400 font-bold" id="neutralCount">0</div>
                    <div class="font-elegant text-yellow-300">Tim Netral</div>
                </div>
                <div class="bg-gray-900/80 p-4 rounded-lg border border-purple-500/50 text-center">
                    <div class="text-2xl text-purple-400 font-bold" id="totalCount">0</div>
                    <div class="font-elegant text-purple-300">Total Role</div>
                </div>
            </div>

            <div class="flex flex-wrap justify-center gap-4 mb-8 scroll-animate">
                <button onclick="filterRoles(event,'all')" class="filter-btn active bg-gray-800 hover:bg-gray-700 text-white px-4 md:px-6 py-2 rounded-full transition-all font-elegant text-sm md:text-base"><i class="fas fa-globe mr-2"></i>Semua Role</button>
                <button onclick="filterRoles(event,'Baik')" class="filter-btn bg-green-800 hover:bg-green-700 text-white px-4 md:px-6 py-2 rounded-full transition-all font-elegant text-sm md:text-base"><i class="fas fa-shield mr-2"></i>Tim Baik</button>
                <button onclick="filterRoles(event,'Jahat')" class="filter-btn bg-red-800 hover:bg-red-700 text-white px-4 md:px-6 py-2 rounded-full transition-all font-elegant text-sm md:text-base"><i class="fas fa-skull mr-2"></i>Tim Jahat</button>
                <button onclick="filterRoles(event,'Netral')" class="filter-btn bg-yellow-800 hover:bg-yellow-700 text-white px-4 md:px-6 py-2 rounded-full transition-all font-elegant text-sm md:text-base"><i class="fas fa-balance-scale mr-2"></i>Tim Netral</button>
            </div>

            <div class="max-w-md mx-auto mb-12 scroll-animate">
                <div class="relative">
                    <input type="text" id="roleSearch" placeholder="Cari role berdasarkan nama..." class="w-full bg-gray-900 border border-red-900/50 rounded-lg px-4 py-3 pl-12 text-white placeholder-gray-400 focus:outline-none focus:border-red-500 font-elegant">
                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                </div>
            </div>

            <div id="rolesGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"></div>

            <div id="imageModal" class="modal" aria-hidden="true"><button onclick="closeImageModal()" class="absolute top-4 right-6 text-red-500 text-3xl cursor-pointer">&times;</button><img class="modal-content-img" id="modalImage" alt="Preview"></div>

            <div id="rolesLoading" class="text-center text-gray-400 font-elegant text-lg mt-12">
                <i class="fas fa-spinner fa-spin text-2xl mb-4"></i>
                <p>Loading roles...</p>
            </div>

            <div id="noResults" class="text-center text-gray-400 font-elegant text-lg mt-12 hidden"><i class="fas fa-search text-4xl mb-4 opacity-50"></i><p>Tidak ditemukan role yang sesuai dengan pencarian Anda.</p></div>
        </div>
    </section>

    <!-- Join -->
    <section id="join" class="py-20 bg-black blood-drip">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <h2 class="font-horror text-3xl md:text-5xl text-red-500 mb-8 text-shadow-red scroll-animate">BERGABUNGLAH DENGAN ELDERMOOR</h2>
            <p class="font-elegant text-lg md:text-xl text-gray-300 mb-12 leading-relaxed max-w-2xl mx-auto scroll-animate">Beranikan diri untuk memasuki dunia yang penuh misteri dan ketegangan. Apakah kamu akan selamat dari malam yang mengerikan ini?</p>

            <!-- Timeline (keeps content intact but uses structure that will adapt) -->
            <div id="joinTimeline" class="timeline mb-16 scroll-animate" aria-hidden="false">
                <!-- Static items preserved but structure is dynamic so you can inject more items if needed -->
                <div class="timeline-item"><div class="timeline-dot"></div><div class="timeline-content"><div class="flex items-center justify-center mb-3"><div class="bg-green-800 rounded-full p-3 mr-3"><i class="fab fa-whatsapp text-white text-xl"></i></div><h4 class="font-elegant text-xl text-green-400">Join Grup WhatsApp</h4></div><p class="text-gray-300 font-elegant">Klik link di bawah untuk masuk grup game dan bertemu dengan pemain lain</p></div></div>
                <div class="timeline-item"><div class="timeline-dot"></div><div class="timeline-content"><div class="flex items-center justify-center mb-3"><div class="bg-blue-800 rounded-full p-3 mr-3"><i class="fas fa-link text-white text-xl"></i></div><h4 class="font-elegant text-xl text-blue-400">Link Akun Anda</h4></div><p class="text-gray-300 font-elegant">Ketik <code class="bg-gray-800 px-2 py-1 rounded text-green-400">/link</code> di grup, lalu ikuti instruksi bot</p></div></div>
                <div class="timeline-item"><div class="timeline-dot"></div><div class="timeline-content"><div class="flex items-center justify-center mb-3"><div class="bg-purple-800 rounded-full p-3 mr-3"><i class="fas fa-user text-white text-xl"></i></div><h4 class="font-elegant text-xl text-purple-400">Set Username</h4></div><p class="text-gray-300 font-elegant">Gunakan <code class="bg-gray-800 px-2 py-1 rounded text-blue-400">/usn nama_anda</code> untuk mengatur nama dalam game</p></div></div>
                <div class="timeline-item"><div class="timeline-dot"></div><div class="timeline-content"><div class="flex items-center justify-center mb-3"><div class="bg-yellow-800 rounded-full p-3 mr-3"><i class="fas fa-clock text-white text-xl"></i></div><h4 class="font-elegant text-xl text-yellow-400">Tunggu Game Dimulai</h4></div><p class="text-gray-300 font-elegant">Host akan memulai lobby saat cukup pemain (minimum 5 orang)</p></div></div>
                <div class="timeline-item"><div class="timeline-dot"></div><div class="timeline-content"><div class="flex items-center justify-center mb-3"><div class="bg-red-800 rounded-full p-3 mr-3"><i class="fas fa-play text-white text-xl"></i></div><h4 class="font-elegant text-xl text-red-400">Mulai Bermain</h4></div><p class="text-gray-300 font-elegant">Ketik <code class="bg-gray-800 px-2 py-1 rounded text-red-400">/join</code> untuk bergabung ke dalam permainan yang menegangkan</p></div></div>
            </div>

            <!-- Commands Panel (keeps menu text as provided) -->
            <div class="bg-gray-900/80 rounded-lg border border-red-900/50 mb-8 scroll-animate">
                <button onclick="toggleCommands()" class="w-full p-6 text-left flex items-center justify-between hover:bg-gray-800/50 transition-all"><div class="flex items-center"><i class="fas fa-terminal text-blue-400 text-2xl mr-4"></i><h3 class="font-elegant text-2xl text-blue-400">Daftar Command Game</h3></div><i id="commandsIcon" class="fas fa-chevron-down text-blue-400 transition-transform"></i></button>
                <div id="commandsDropdown" class="command-dropdown" aria-hidden="true">
                    <div class="p-6 pt-0">
                        <!-- content preserved exactly as requested -->
                        <div class="grid md:grid-cols-2 gap-6">
                            <div>
                                <h4 class="font-elegant text-lg text-green-400 mb-4 flex items-center"><i class="fas fa-gamepad mr-2"></i>Command Dasar</h4>
                                <div class="space-y-2">
                                  <div class="command-item"><code class="text-green-400">/link</code> — <span class="text-gray-300">Hubungkan akun (grup → DM)</span></div>
                                  <div class="command-item"><code class="text-blue-400">/usn &lt;nama&gt;</code> — <span class="text-gray-300">Set username game (DM)</span></div>
                                  <div class="command-item"><code class="text-purple-400">/start</code> — <span class="text-gray-300">Buat lobby Simple Edition</span></div>
                                  <div class="command-item"><code class="text-red-400">/startchaos</code> — <span class="text-gray-300">Buat lobby Chaos Edition</span></div>
                                  <div class="command-item"><code class="text-yellow-400">/join</code> — <span class="text-gray-300">Ikut lobby</span></div>
                                  <div class="command-item"><code class="text-orange-400">/forcestart</code> — <span class="text-gray-300">Host paksa mulai</span></div>
                                </div>
                            </div>

                            <div>
                                <h4 class="font-elegant text-lg text-red-400 mb-4 flex items-center"><i class="fas fa-sword mr-2"></i>Aksi Game</h4>
                                <div class="space-y-2">
                                  <div class="command-item"><code class="text-blue-400">/skip</code> — <span class="text-gray-300">Lewat aksi malam (DM)</span></div>
                                  <div class="command-item"><code class="text-purple-400">/skipvote</code> — <span class="text-gray-300">Lewat voting siang</span></div>
                                  <div class="command-item"><code class="text-yellow-400">/forcevote</code> — <span class="text-gray-300">Minta percepatan voting</span></div>
                                  <div class="command-item"><code class="text-green-400">/players</code> — <span class="text-gray-300">Lihat daftar pemain</span></div>
                                  <div class="command-item"><code class="text-red-400">/reset</code> — <span class="text-gray-300">Reset game (host)</span></div>
                                  <div class="command-item"><code class="text-cyan-400">/myid</code> — <span class="text-gray-300">Lihat akun (via DM)</span></div>
                                </div>
                            </div>

                            <div>
                                <h4 class="font-elegant text-lg text-yellow-400 mb-4 flex items-center"><i class="fas fa-info-circle mr-2"></i>Informasi</h4>
                                <div class="space-y-2">
                                  <div class="command-item"><code class="text-blue-400">/roledef</code> — <span class="text-gray-300">Lihat role Simple Edition</span></div>
                                  <div class="command-item"><code class="text-purple-400">/rolechaos</code> — <span class="text-gray-300">Lihat role Chaos Edition</span></div>
                                  <div class="command-item"><code class="text-green-400">/status</code> — <span class="text-gray-300">Lihat info game dan pengaturan</span></div>
                                  <div class="command-item"><code class="text-yellow-400">/composition</code> — <span class="text-gray-300">Lihat komposisi game saat ini</span></div>
                                  <div class="command-item"><code class="text-red-400">/say &lt;pesan&gt;</code> — <span class="text-gray-300">Broadcast ke semua member</span></div>
                                </div>
                            </div>

                            <div>
                                <h4 class="font-elegant text-lg text-purple-400 mb-4 flex items-center"><i class="fas fa-crown mr-2"></i>Host & Admin</h4>
                                <div class="space-y-2">
                                  <div class="command-item"><code class="text-purple-400">/revelation &lt;mode&gt;</code> — <span class="text-gray-300">Atur mode pengungkapan</span></div>
                                  <div class="command-item"><code class="text-blue-400">/add</code> — <span class="text-gray-300">Host tambah waktu lobby 30 detik</span></div>
                                  <div class="command-item"><code class="text-green-400">/antispam</code> — <span class="text-gray-300">Lihat statistik anti-spam</span></div>
                                  <div class="command-item"><code class="text-red-400">/resetspam</code> — <span class="text-gray-300">Reset data spam (admin only)</span></div>
                                  <div class="command-item"><code class="text-yellow-400">/forcereveal &lt;player&gt;</code> — <span class="text-gray-300">Ungkap role pemain</span></div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 p-4 bg-red-900/20 border border-red-500/30 rounded-lg">
                            <h5 class="font-elegant text-red-400 font-semibold mb-2">📌 Catatan Penting:</h5>
                            <ul class="text-gray-300 font-elegant text-sm space-y-1">
                                <li>• Semua aksi role dilakukan via DM</li>
                                <li>• Gunakan nomor target sesuai daftar (contoh: <code class="text-green-400">/1</code> untuk target pertama)</li>
                                <li>• Anti-spam aktif: Max 20 pesan/menit, Max 10 pesan sama berturut-turut</li>
                                <li>• Bot akan timeout spammer selama 1 menit</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <a href="https://chat.whatsapp.com/LpFsXYX995F0TffzSQKzDk" target="_blank" class="inline-flex items-center bg-green-600 hover:bg-green-700 text-white font-elegant px-6 md:px-8 py-3 md:py-4 rounded-lg transition-all transform hover:scale-105 glow pulse-red"><i class="fab fa-whatsapp text-2xl mr-3"></i>Join Grup WhatsApp Eldermoor</a>

            <div class="mt-8 text-sm text-gray-500 font-elegant"><p class="typing">Menunggu keberanian Anda untuk memasuki kegelapan...</p></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-black border-t border-red-900/50 py-8">
        <div class="max-w-6xl mx-auto px-4 text-center">
            <p class="font-elegant text-gray-400 mb-4">© 2024 Eldermoor Werewolf Game. Dibuat dengan ❤️ dan sedikit teror.</p>
            <div class="flex justify-center space-x-6 text-gray-500"><span class="font-elegant">Selamat bermain dan semoga beruntung...</span></div>
        </div>
    </footer>

    <!-- Role Modal -->
    <div id="roleModal" class="modal" aria-hidden="true">
        <div class="bg-gray-900 rounded-lg p-6 md:p-8 max-w-4xl w-full mx-4 border border-red-900 relative modal-content">
            <button onclick="closeModal()" class="absolute top-4 right-4 text-red-500 hover:text-red-300 text-2xl"><i class="fas fa-times"></i></button>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // --- Dev notice ---
        const devNotice = document.getElementById('devNotice');
        const devNoticeOk = document.getElementById('devNoticeOk');
        if (!localStorage.getItem('eldermoor_dev_notice_seen')) {
            devNotice.style.display = 'flex';
        } else {
            devNotice.style.display = 'none';
        }
        devNoticeOk.addEventListener('click', () => { devNotice.style.display = 'none'; localStorage.setItem('eldermoor_dev_notice_seen','true'); });

        // Mobile nav
        function toggleMobileNav(){ document.getElementById('mobileNav').classList.toggle('show'); }

        // Commands dropdown
        function toggleCommands(){ const dropdown = document.getElementById('commandsDropdown'); const icon = document.getElementById('commandsIcon'); dropdown.classList.toggle('show'); icon.classList.toggle('rotate-180'); dropdown.setAttribute('aria-hidden', !dropdown.classList.contains('show')); }

        // Intersection observer for scroll animations
        function observeElements(){ const obs = new IntersectionObserver((entries)=>{ entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('visible'); }); },{ threshold:0.12, rootMargin:'0px 0px -40px 0px' }); document.querySelectorAll('.scroll-animate').forEach(el=>obs.observe(el)); }
        window.addEventListener('load', observeElements);

        // Audio controls
        let audioPlaying = false; const bgAudio = document.getElementById('bgAudio'); document.getElementById('audioToggle').addEventListener('click', function(){ if(audioPlaying){ bgAudio.pause(); this.innerHTML = '<i class="fas fa-volume-mute text-xl"></i>'; audioPlaying=false; } else { bgAudio.play().catch(()=>{}); this.innerHTML = '<i class="fas fa-volume-up text-xl"></i>'; audioPlaying=true; } });

        // Smooth scroll
        function scrollToSection(id){ document.getElementById(id).scrollIntoView({ behavior:'smooth' }); }

        // Howl
        function playHowl(){ const howl = document.getElementById('howlAudio'); howl.currentTime = 0; howl.play().catch(()=>{}); }

        // Image modal
        function openImageModal(src){ const modal = document.getElementById('imageModal'); const img = document.getElementById('modalImage'); modal.classList.add('show'); modal.setAttribute('aria-hidden','false'); img.src = src || '../../data/images/role/default-role.jpg'; let scale = 1; img.style.transform = 'scale(1)'; img.onclick = ()=>{ scale = scale===1?2:1; img.style.transform = `scale(${scale})`; img.style.cursor = scale===1 ? 'zoom-in' : 'zoom-out'; }; }
        function closeImageModal(){ const modal = document.getElementById('imageModal'); modal.classList.remove('show'); modal.setAttribute('aria-hidden','true'); document.getElementById('modalImage').src = ''; }

        // Roles setup
        const roles = 
            {
              "Seer": {
                "team": "Baik",
                "emoji": "🔮",
                "image": "../data/images/role/seer.jpg",
                "nightAction": "Menerawang 1 pemain setiap malam.",
                "description": "Pewaris darah Oracle kuno yang memiliki mata batin untuk menembus tabir realitas. Keluarga Seer telah menjadi pelindung spiritual desa selama tujuh generasi dengan bola kristal warisan nenek moyang."
              },
              "Aura Seer": {
                "team": "Baik",
                "emoji": "👁️",
                "image": "../data/images/role/aura_seer.jpg",
                "nightAction": "Dapat menerawang aura 1 pemain setiap malamnya (good, evil, unknown)",
                "description": "Peramal muda yang kehilangan kemampuan melihat detail tapi masih bisa merasakan aura spiritual seseorang. Mata batinnya rusak akibat terlalu sering menatap kegelapan, namun intuisi tentang kebaikan dan kejahatan masih tajam."
              },
              "Detective": {
                "team": "Baik",
                "emoji": "🕵️",
                "image": "../data/images/role/detective.jpg",
                "nightAction": "Menyelidiki 2 pemain tiap malam dan mendapat hasil perbandingan (= atau !=).",
                "description": "Mantan agen kerajaan yang kehilangan keluarga dalam perang melawan kultus serigala dua dekade lalu. Pengalaman traumatisnya memberikan kemampuan supernatural untuk membandingkan aura gelap dua orang sekaligus."
              },
              "Guardian Angel": {
                "team": "Baik",
                "emoji": "👼",
                "image": "../data/images/role/guardian_angel.jpg",
                "nightAction": "Melindungi 1 pemain tiap malam. Jika salah melindungi serigala, kau akan mati atas pilihan sendiri!",
                "description": "Utusan cahaya suci yang diturunkan dari alam gaib untuk menjaga keseimbangan dunia. Kitab suci kuno memperingatkan bahwa melindungi makhluk jahat akan mengkontaminasi energi sucinya."
              },
              "Hunter": {
                "team": "Baik",
                "emoji": "🏹",
                "image": "../data/images/role/hunter.jpg",
                "nightAction": "Bersiaga untuk balas dendam jika diserang atau digantung.",
                "description": "Keturunan pemburu monster legendaris yang anak panah terakhirnya diberkati roh sang ayah. Pantang mati dengan sia-sia, ia akan menggunakan napas terakhir untuk menuntaskan misi suci keluarganya."
              },
              "Gunner": {
                "team": "Baik",
                "emoji": "🔫",
                "image": "../data/images/role/gunner.jpg",
                "nightAction": "Menembak 1 target dengan peluru perak (2 peluru tersedia). Pelurumu menggema, semua warga akan tahu jika kau menembak!",
                "description": "Veteran perang yang senapannya diberkati imam dengan air suci dan peluru perak untuk melawan makhluk supernatural. Dentuman senjatanya menggema karena dibuat khusus oleh pandai besi legendaris untuk berburu monster."
              },
              "Harlot": {
                "team": "Baik",
                "emoji": "💋",
                "image": "../data/images/role/harlot.jpg",
                "nightAction": "Mengunjungi rumah 1 pemain tiap malam. Jika kau mengunjungi rumah yang salah, kau akan bertemu dengan ajalmu! Serigala tidak akan bisa memangsamu, karena kau sedang tidak ada dirumah.",
                "description": "Mantan penari istana yang diasingkan karena keterlibatannya dengan ritual kuno penyembahan dewi malam. Takdir tragisnya adalah selalu berada di tempat yang salah pada waktu yang salah, seolah dikutuk untuk menyaksikan kematian."
              },
              "Cupid": {
                "team": "Netral",
                "emoji": "💘",
                "image": "../data/images/role/cupid.jpg",
                "nightAction": "Menyatukan 2 orang di malam pertama. Bertahanlah bersama lovers yang kau ciptakan dan kau akan menang bersama mereka!",
                "description": "Anak dewa yang turun ke dunia fana untuk mempelajari cinta manusia namun terjebap dalam wujud mortal. Panah emasnya yang dibuat dari bintang jatuh mengikat dua jiwa selamanya dalam ikatan yang lebih kuat dari kematian."
              },
              "Mason": {
                "team": "Baik",
                "emoji": "🧱",
                "image": "../data/images/role/mason.jpg",
                "nightAction": "Berkoordinasi dengan sesama Mason untuk melindungi desa.",
                "description": "Anggota persaudaraan rahasia yang membangun benteng spiritual melindungi desa dari invasi makhluk gelap. Mereka terikat sumpah suci yang diucapkan di atas altar batu kuno untuk saling melindungi sampai mati."
              },
              "Angel": {
                "team": "Baik",
                "emoji": "😇",
                "image": "../data/images/role/angel.jpg",
                "nightAction": "Membangkitkan 1 pemain yang mati (hanya sekali seumur hidup). Nyawa dibayar dengan nyawa - kau hancur berkeping-keping!",
                "description": "Malaikat yang kehilangan sayapnya karena melanggar hukum surga demi menyelamatkan seorang manusia. Kekuatan terakhirnya adalah memberikan napas kehidupan kepada satu jiwa yang telah meninggal dunia."
              },
              "Witch": {
                "team": "Baik",
                "emoji": "🧙‍♀️",
                "image": "../data/images/role/witch.jpg",
                "nightAction": "Dapat memilih untuk menyelamatkan warga atau meracuni. Kau berada di pihak warga, jadi bijaklah!",
                "description": "Pewaris terakhir dari garis keturunan penyihir putih yang menjaga keseimbangan alam. Ramuan penyembuh dan racunnya dibuat dari tumbuhan langka yang hanya tumbuh di kuburan para saint."
              },
              "The Chemist": {
                "team": "Baik",
                "emoji": "🧑‍🔬",
                "image": "../data/images/role/the_chemist.jpg",
                "nightAction": "Memaksa 1 pemain untuk meminum 1 dari 2 ramuan buatanmu, dan kau akan meminum ramuan lainnya. Satu diantara kalian akan mati!",
                "description": "Ilmuwan gila yang kehilangan kewarasan setelah keluarganya menjadi subjek eksperimen serigala. Obsesinya pada ramuan kimia membuatnya menciptakan permainan mematikan untuk mencari kebenaran."
              },
              "Loudmouth": {
                "team": "Baik",
                "emoji": "🤬",
                "image": "../data/images/role/loudmouth.jpg",
                "nightAction": "Di malam pertama, memilih 1 pemain. Ketika kau mati, role pemain tersebut akan diumumkan ke semua warga.",
                "description": "Mantan penyiar radio desa yang kehilangan suaranya akibat kutukan. Sebelum mati, ia akan menggunakan sisa kekuatan supernaturalnya untuk mengungkap satu kebenaran terakhir kepada dunia."
              },
              "Judge": {
                "team": "Baik",
                "emoji": "🧑‍⚖️",
                "image": "../data/images/role/judge.jpg",
                "nightAction": "Dapat main hakim sendiri dengan memilih 1 pemain untuk dieksekusi, jika voting siang tidak ada yang tergantung. Jika target adalah Villager, kau yang mati. (Maksimal 2x per game)",
                "description": "Hakim agung yang kehilangan keluarga dalam kekacauan hukum rimba. Ia bersumpah akan menegakkan keadilan dengan tangannya sendiri, bahkan jika harus mengorbankan nyawa innocent."
              },
              "Prayer": {
                "team": "Baik",
                "emoji": "🤲",
                "image": "../data/images/role/prayer.jpg",
                "nightAction": "Berdoa untuk 1 pemain tiap malam. Jika mereka mati, kau mendapat kemampuan baru berdasarkan aura mereka: Good = 🛡️Protect, Evil = 🔪Kill, Unknown = 🎭Reveal .",
                "description": "Pendeta yang kehilangan iman setelah gerejanya dibakar serigala. Doa-doanya kini bercampur dengan kutukan, memberikan kekuatan yang bergantung pada jiwa yang ia doakan."
              },
              "Werewolf": {
                "team": "Jahat",
                "emoji": "🐺",
                "image": "../data/images/role/werewolf.jpg",
                "nightAction": "Tidak pernah puas untuk memangsa 1 korban setiap malamnya.",
                "description": "Manusia terkutuk yang kehilangan jiwa kemanusiaannya akibat gigitan alpha di masa lampau. Legenda mengatakan mereka dulunya adalah penduduk desa yang berubah saat bulan purnama pertama setelah terkena kutukan."
              },
              "Alpha Werewolf": {
                "team": "Jahat",
                "emoji": "👹",
                "image": "../data/images/role/alpha_werewolf.jpg",
                "nightAction": "Menerkam korban dan memiliki peluang 20% untuk mengubah mangsanya menjadi kawanan.",
                "description": "Raja serigala yang terlahir dari ritual kelam suku primitif ribuan tahun lalu. Darah Alpha mengandung virus supernatural yang dapat mengubah manusia biasa menjadi budak kegelapan."
              },
              "Lycan": {
                "team": "Jahat",
                "emoji": "🌙",
                "image": "../data/images/role/lycan.jpg",
                "nightAction": "Menyamar sempurna sebagai manusia di siang hari (pasif: terdeteksi sebagai Warga Biasa (salah satu peran yang bermain) oleh Seer, dan dianggap baik oleh Aura Seer dan Detektif).",
                "description": "Keturunan hybrid hasil perkawinan terlarang antara manusia dengan serigala kuno yang telah berevolusi selama berabad-abad. Darah campurannya memungkinkan transformasi yang sempurna, menyembunyikan aura kegelapan dari mata manusia biasa namun tidak dari mata batin Oracle."
              },
              "Wolfman": {
                "team": "Baik",
                "emoji": "🦴",
                "image": "../data/images/role/wolfman.jpg",
                "nightAction": "Berburu sendirian dengan naluri primitif (pasif: terdeteksi sebagai Werewolf oleh Seer, dan dianggap jahat oleh Aura Seer dan Detective).",
                "description": "Manusia yang tersesat di hutan belantara sejak kecil dan dibesarkan kawanan serigala selama puluhan tahun. Meskipun jiwanya tetap manusia dan berjuang untuk kebaikan, aura liar dan naluri predator yang tertanam dalam dirinya membuatnya tampak menakutkan bagi mata yang terlatih mendeteksi kejahatan."
              },
              "Cursed": {
                "team": "Baik",
                "emoji": "😾",
                "image": "../data/images/role/cursed.jpg",
                "nightAction": "Berdoa agar tidak digigit serigala dan berubah menjadi monster.",
                "description": "Keturunan dari warga yang selamat dari serangan serigala pertama namun terkena percikan darah monster. Kutukan dalam darahnya tertidur hingga gigitan serigala membangunkan setan yang telah lama bersemayam."
              },
              "Traitor": {
                "team": "Jahat",
                "emoji": "🐍",
                "image": "../data/images/role/traitor.jpg",
                "nightAction": "Menyamar sebagai warga sambil menunggu saat yang tepat untuk mengkhianati. Ia akan berubah menjadi serigala ketika semua serigala tewas!",
                "description": "Mantan penduduk desa yang membuat perjanjian gelap dengan alpha serigala untuk menyelamatkan nyawanya. Jiwa yang sudah terjual kepada kegelapan menunggu saat yang tepat untuk mengkhianati teman-temannya sendiri."
              },
              "Wild Child": {
                "team": "Baik",
                "emoji": "👶",
                "image": "../data/images/role/wild_child.jpg",
                "nightAction": "Menetapkan mentor di malam pertama. Ketika mentornya mati, naluri buas menguasai dirinya hingga menjadi seorang werewolf",
                "description": "Anak yatim yang dibesarkan oleh serigala di hutan belantara namun diselamatkan penduduk desa. Ikatan supernatural dengan figur pengganti orangtuanya begitu kuat hingga kehilangan mentor membangunkan naluri binatang buas dalam dirinya."
              },
              "Lil Wolvy": {
                "team": "Jahat",
                "emoji": "🐺",
                "image": "../data/images/role/lil_wolvy.jpg",
                "nightAction": "Memangsa korban seperti serigala dewasa. Jika digantung, serigala lain akan murka dan bisa membunuh 2 orang di malam berikutnya!",
                "description": "Anak serigala yang terlalu imut dan polos sehingga kawanan dewasa sangat melindunginya. Kematian si kecil akan memicu amarah besar kawanan serigala yang kehilangan 'anak emas' mereka."
              },
              "Wolf Summoner": {
                "team": "Jahat",
                "emoji": "🌕",
                "image": "../data/images/role/wolf_summoner.jpg",
                "nightAction": "Berkoordinasi dengan serigala lain untuk berburu. Sekali per game, dapat membangkitkan 1 pemain mati menjadi Werewolf biasa.",
                "description": "Nekromancer serigala yang memiliki koneksi dengan arwah-arwah serigala kuno. Ritual pemanggilan yang ia kuasai dapat mengikat jiwa mati ke dalam tubuh serigala yang baru."
              },
              "Wolf Trickster": {
                "team": "Jahat",
                "emoji": "🎭",
                "image": "../data/images/role/wolf_trickster.jpg",
                "nightAction": "Berkoordinasi dengan serigala lain. Di siang hari, dapat memilih target - jika target mati bukan karena serigala, akan mencuri penampilannya (hanya sekali per game).",
                "description": "Serigala shapeshifter yang memiliki kemampuan mencuri identitas korban. Sihir kuno yang mengalir dalam darahnya memungkinkan transformasi sempurna setelah menyerap esensi jiwa yang meninggal."
              },
              "Wolf Seer": {
                "team": "Jahat",
                "emoji": "👁️",
                "image": "../data/images/role/wolf_seer.jpg",
                "nightAction": "Melihat role 1 pemain tiap malam dan berkoordinasi dengan serigala lain. Tidak bisa ikut voting kill kecuali menyerahkan kemampuan melihatnya kepada Dewa atau menjadi serigala terakhir.",
                "description": "Serigala dengan mata ketiga yang dapat menembus semua penyamaran dan kebohongan. Kekuatan penglihatan supernaturalnya sangat berharga sehingga kawanan melindunginya dari pertarungan langsung."
              },
              "Arsonist": {
                "team": "Netral",
                "emoji": "🔥",
                "image": "../data/images/role/arsonist.jpg",
                "nightAction": "Dapat menuang bensin atau membakar semua korban yang ditandai.",
                "description": "Mantan pendeta yang kehilangan akal setelah menyaksikan keluarganya dibantai serigala dalam kobaran api gereja. Api suci yang dulunya melindungi kini menjadi senjata balas dendamnya yang membuta."
              },
              "Serial Killer": {
                "team": "Netral",
                "emoji": "🔪",
                "image": "../data/images/role/serial_killer.jpg",
                "nightAction": "Membunuh 1 pemain tiap malam. Tidak bisa dibunuh serigala (jika diserang, kamu akan menyerang balik dan membunuh serigala terlemah).",
                "description": "Mantan algojo kerajaan yang kehilangan kewarasan setelah mengeksekusi ratusan terdakwa penyihir yang tidak bersalah. Arwah para korban yang tidak berdosa membisikkan nama-nama target baru setiap malam dalam mimpinya."
              },
              "Doppelganger": {
                "team": "Netral",
                "emoji": "🎭",
                "image": "../data/images/role/doppelganger.jpg",
                "nightAction": "Di malam pertama, memilih seseorang untuk ditiru. Ketika target mati, mewarisi role mereka.",
                "description": "Makhluk shapeshifter kuno yang terjebap dalam wujud manusia karena mantra binding seorang penyihir. Satu-satunya cara untuk membebaskan diri adalah dengan menyerap esensi jiwa orang lain yang telah meninggal."
              },
              "Fool": {
                "team": "Netral",
                "emoji": "🤡",
                "image": "../../data/images/role/fool.jpg",
                "nightAction": "Mencoba menerawang namun hasil ramalannya meleset, dan ia masih percaya bahwa dirinya seorang oracle",
                "description": "Mantan murid Seer yang kehilangan kemampuan supernatural akibat kecelakaan ritual yang salah. Otaknya yang rusak masih percaya dapat melihat masa depan, padahal yang dilihatnya hanya bayang-bayang masa lalu."
              },
              "Tanner": {
                "team": "Netral",
                "emoji": "👺",
                "image": "../../data/images/role/tanner.jpg",
                "nightAction": "Merencanakan cara agar digantung warga keesokan harinya. (Tanner menang jika berhasil digantung)",
                "description": "Penyamak kulit yang tergila-gila setelah secara tidak sengaja mengolah kulit korban serigala dan terkena kutukan kegilaan. Obsesinya pada kematian muncul dari bisikan arwah-arwah yang terjebap dalam produk kerjanya."
              },
              "Evil Detective": {
                "team": "Netral",
                "emoji": "🕵️‍♂️👹",
                "image": "../../data/images/role/evil_detective.jpg",
                "nightAction": "Memilih 2 pemain tiap malam, dapat memilih dirinya sendiri. Jika beda team, keduanya mati. Jika sama team, tidak ada yang mati dan kau tahu team mereka. Tidak bisa dibunuh serigala.",
                "description": "Detektif korup yang menjual informasi kepada penjahat tertinggi. Kemampuan investigasinya berubah menjadi senjata pemerasan yang mematikan setelah jiwanya dikuasai kegelapan."
              },
              "Cannibal": {
                "team": "Netral",
                "emoji": "🍖",
                "image": "../../data/images/role/cannibal.jpg",
                "nightAction": "Setiap malam mendapat 1 stack kelaparan. Dapat mengonsumsi stack untuk memakan pemain (maksimal 5 stack tersimpan). Tidak bisa dibunuh serigala.",
                "description": "Mantan tukang masak yang tergila-gila daging manusia setelah secara tidak sengaja memakan korban serigala. Nafsu kanibalnya tumbuh seiring waktu, menumpuk lapar yang harus dipuaskan."
              },
              "Bandit": {
                "team": "Netral",
                "emoji": "🥷",
                "image": "../../data/images/role/bandit.jpg",
                "nightAction": "Di malam pertama, mengubah 1 Villager/Solo voter menjadi Accomplice. Bisa membunuh bersama Accomplice tiap malam. Tidak bisa dibunuh serigala.",
                "description": "Pemimpin gerombolan perampok yang kehilangan semua anak buahnya dalam serangan serigala. Ia kini merekrut warga desa dengan paksa untuk membangun kembali kerajaan kriminalnya."
              },
              "Accomplice": {
                "team": "Netral",
                "emoji": "💢",
                "image": "../../data/images/role/accomplice.jpg",
                "nightAction": "Merupakan Kacung Bandit guna membunuh target tiap malam. Pilihan Accomplice diprioritaskan. Dapat dibunuh serigala tidak seperti Bandit.",
                "description": "Warga desa yang dipaksa bergabung dengan Bandit demi keselamatan keluarga. Meskipun tidak suka dengan kehidupan kriminal, ia terpaksa menuruti perintah demi bertahan hidup."
              },
              "Headhunter": {
                "team": "Netral",
                "emoji": "🎯",
                "image": "../../data/images/role/headhunter.jpg",
                "nightAction": "Target rahasia (acak) ditentukan di awal game. Buat targetmu digantung oleh warga dan kamu menang! Jika targetmu mati dengan cara lain, kamu akan bergabung dengan tim Jahat dan menang atau kalah bersama mereka.",
                "description": "Pemburu bayaran profesional yang menerima kontrak misterius untuk mengeliminasi target spesifik. Sukses atau gagalnya misi akan menentukan kesetiaannya pada siapa."
              },
              "Hercules": {
                "team": "Baik",
                "emoji": "🦾",
                "image": "../../data/images/role/hercules.jpg",
                "nightAction": "Pasif: Butuh 2 serangan untuk mati. Melindungi Harlot yang mengunjunginya.",
                "description": "Keturunan dewa yang memiliki kekuatan dan ketangguhan luar biasa. Otot dan tulangnya sekuat baja, membutuhkan dua serangan mematikan untuk mengalahkannya. Aura pelindungnya bahkan dapat melindungi wanita yang mengunjunginya dari bahaya."
              },
              "Blacksmith": {
                "team": "Baik",
                "emoji": "⚒️",
                "image": "../../data/images/role/blacksmith.jpg",
                "nightAction": "Sekali per game: Ciptakan Malam Damai - tidak ada aksi pembunuhan yang bisa dilakukan.",
                "description": "Pandai besi master yang menguasai sihir kuno logam. Sekali dalam hidupnya, ia dapat menempa perisai spiritual raksasa yang melindungi seluruh desa dari segala bentuk kekerasan selama satu malam."
              },
              "Guardian Wolf": {
                "team": "Jahat",
                "emoji": "🛡️🐺",
                "image": "../../data/images/role/guardian_wolf.jpg",
                "nightAction": "Sekali per game: Lindungi kawanan dari Serial Killer atau dari voting lynch (otomatis lanjut ke malam).",
                "description": "Serigala pelindung yang memiliki ikatan mistis dengan kawanannya. Kekuatan magisnya dapat menyelamatkan satu serigala dari kematian atau bahkan menghentikan eksekusi publik dengan kekuatan supernatural."
              },
              "Villager": {
                "team": "Baik",
                "emoji": "👤",
                "image": "../../data/images/role/villager.jpg",
                "nightAction": "Tidur nyenyak dan berharap tidak ada yang memburu di malam hari.",
                "description": "Warga desa biasa yang terjebak dalam kutukan supernatural Eldermoor. Meskipun tidak memiliki kemampuan khusus, kepolosan dan kebaikhatian mereka adalah harapan terakhir desa."
              }
            };

        function updateRoleStats(){ const stats = { Baik:0, Jahat:0, Netral:0 }; Object.values(roles).forEach(r=>{ if(r && r.team) stats[r.team] = (stats[r.team]||0)+1; }); document.getElementById('goodCount').textContent = stats.Baik || 0; document.getElementById('evilCount').textContent = stats.Jahat || 0; document.getElementById('neutralCount').textContent = stats.Netral || 0; document.getElementById('totalCount').textContent = Object.keys(roles).length || 0; }

        function safeImgPath(path){ return path ? path : '../../data/images/role/default-role.jpg'; }

        function generateRoleCards(){ const grid = document.getElementById('rolesGrid'); grid.innerHTML = ''; Object.entries(roles).forEach(([roleName, roleData])=>{
            const teamClass = roleData.team === 'Baik' ? 'team-baik' : roleData.team === 'Jahat' ? 'team-jahat' : 'team-netral';
            const teamColor = roleData.team === 'Baik' ? 'text-green-400' : roleData.team === 'Jahat' ? 'text-red-400' : 'text-yellow-400';
            const card = document.createElement('div'); card.className = `role-card ${teamClass} scroll-animate`; card.setAttribute('data-team', roleData.team); card.setAttribute('data-role', roleName.toLowerCase()); card.setAttribute('data-emote', roleData.emoji || '');
            // build inner
            card.innerHTML = `
                <img src="${safeImgPath(roleData.image)}" alt="${roleName}" onerror="this.onerror=null;this.src='../../data/images/role/default-role.jpg';" />
                <div class="card-bottom">
                    <h3 class="font-elegant text-lg text-white">${roleName}</h3>
                    <span class="px-3 py-1 rounded-full text-xs font-elegant ${teamColor} border border-current">${roleData.team}</span>
                </div>
            `;
            card.addEventListener('click', ()=> openRoleModal(roleName, roleData)); grid.appendChild(card);
        }); }

        // Win condition & related roles (kept content intact)
        function getWinCondition(roleName, team){ switch(team){ case 'Baik': return 'Menang jika semua Serigala telah dibasmi.'; case 'Jahat': return 'Menang jika jumlah Serigala ≥ jumlah Warga.'; case 'Netral': if(roleName==='Tanner') return 'Menang jika berhasil digantung warga.'; if(roleName==='Cupid') return 'Menang bersama Lovers yang kau ciptakan.'; if(roleName==='Serial Killer') return 'Menang jika bertahan hidup sampai akhir (last standing).'; if(roleName==='Arsonist') return 'Menang jika semua pemain lain hangus terbakar.'; if(roleName==='Headhunter') return 'Menang jika target rahasia berhasil digantung.'; if(roleName==='Bandit') return 'Menang jika tetap hidup bersama Accomplice atau tim Jahat menang.'; if(roleName==='Cannibal') return 'Menang jika bertahan hidup dengan melahap korbanmu.'; if(roleName==='Doppelganger') return 'Menang sesuai role yang diwarisi.'; if(roleName==='Evil Detective') return 'Menang jika semua target investigasimu terbunuh.'; return 'Memiliki kondisi menang spesial sendiri.'; default: return 'Tidak ada kondisi khusus.'; } }

        function getRelatedRoles(roleName){ const relations = { "Seer":"Aura Seer, Fool", "Aura Seer":"Seer, Detective", "Detective":"Evil Detective", "Guardian Angel":"Angel, Hercules", "Hunter":"Gunner", "Cupid":"Lovers", "Werewolf":"Alpha Werewolf, Wolf Summoner, Wolf Trickster, Wolf Seer, Guardian Wolf, Lil Wolvy", "Alpha Werewolf":"Werewolf, Lil Wolvy", "Lycan":"Wolfman", "Wolfman":"Lycan", "Cursed":"Werewolf, Wild Child", "Traitor":"Werewolf (aktif jika semua Serigala mati)", "Wild Child":"Mentor (role acak), Werewolf", "Wolf Summoner":"Werewolf, Necromancy", "Wolf Trickster":"Werewolf, Doppelganger", "Wolf Seer":"Werewolf, Seer", "Guardian Wolf":"Werewolf Pack", "Bandit":"Accomplice", "Accomplice":"Bandit", "Headhunter":"Target rahasia", "Lovers":"Cupid" }; return relations[roleName] || ''; }

        // Modal open
        function openRoleModal(roleName, roleData){ const winCondition = getWinCondition(roleName, roleData.team); const relatedRoles = getRelatedRoles(roleName);
            const modalContent = `
                <div class="text-center mb-6">
                    <img src="${safeImgPath(roleData.image)}" alt="${roleName}" class="w-32 h-32 object-contain mx-auto mb-4 drop-shadow-xl cursor-pointer" onclick="openImageModal('${safeImgPath(roleData.image)}')" onerror="this.onerror=null;this.src='../../data/images/role/default-role.jpg';" />
                    <h2 class="font-elegant text-3xl text-red-400 mb-2">${roleName}</h2>
                    <span class="px-4 py-1 rounded-full text-sm font-elegant border ${roleData.team === 'Baik' ? 'border-green-500 text-green-400' : roleData.team === 'Jahat' ? 'border-red-500 text-red-400' : 'border-yellow-500 text-yellow-400'}">${roleData.team}</span>
                </div>
                <div class="space-y-4 text-left">
                    <div><strong class="text-purple-400">Aksi Malam:</strong><p class="text-gray-300 mt-1">${roleData.nightAction || ''}</p></div>
                    <div><strong class="text-blue-400">Win Condition:</strong><p class="text-gray-300 mt-1">${winCondition}</p></div>
                    ${relatedRoles ? `<div><strong class="text-yellow-400">Terkait:</strong><p class="text-gray-300 mt-1">${relatedRoles}</p></div>` : ''}
                    <div><strong class="text-red-400">Deskripsi:</strong><p class="text-gray-300 mt-1 leading-relaxed">${roleData.description || ''}</p></div>
                </div>
            `;
            document.getElementById('modalContent').innerHTML = modalContent; document.getElementById('roleModal').classList.add('show'); document.getElementById('roleModal').setAttribute('aria-hidden','false'); }
        function closeModal(){ document.getElementById('roleModal').classList.remove('show'); document.getElementById('roleModal').setAttribute('aria-hidden','true'); }

        // Filter roles (event-aware)
        function filterRoles(e, team){ if(e && e.currentTarget){ document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active')); e.currentTarget.classList.add('active'); } const cards = document.querySelectorAll('.role-card'); let visible = 0; cards.forEach(c=>{ if(team==='all' || c.getAttribute('data-team')===team){ c.style.display = ''; visible++; } else c.style.display = 'none'; }); document.getElementById('noResults').classList.toggle('hidden', visible>0); }

        // Search
        document.getElementById('roleSearch').addEventListener('input', function(){ const q = this.value.trim().toLowerCase(); const cards = document.querySelectorAll('.role-card'); let visible=0; cards.forEach(c=>{ if(!q || c.getAttribute('data-role').includes(q)){ c.style.display=''; visible++; } else c.style.display='none'; }); document.getElementById('noResults').classList.toggle('hidden', visible>0); });

        updateRoleStats();
        generateRoleCards();

        // close modals with ESC or click outside
        document.addEventListener('keydown', (ev)=>{ if(ev.key==='Escape'){ closeModal(); closeImageModal(); } });
        document.addEventListener('click', (ev)=>{ if(ev.target.classList && ev.target.classList.contains('modal')){ ev.target.classList.remove('show'); } });

    </script>
</body>
</html>
